var youzify_load_attachments=!1;!function(l){"use strict";l(document).ready(function(){jQuery().viewportChecker&&(l.youzify_init_wall_posts_effect=function(){l(".youzify_effect")[0]&&l(".youzify_effect").viewportChecker({classToAdd:"animated",classToRemove:"invisible",removeClassAfterAnimation:!0,offset:"10%",callbackFunction:function(t,i){t.addClass(t.data("effect"))}},500)},l.youzify_init_wall_posts_effect(),l("#youzify div.activity")[0]&&new MutationObserver(function(t){l.youzify_init_wall_posts_effect(),l.youzify_sliders_init()}).observe(l("#youzify div.activity")[0],{attributes:!1,childList:!0,subtree:!0,characterData:!1}));function s(){var t,i,a,o,e,s=document.cookie.split(";"),n={};for(t=0;t<s.length;t++)a=(i=s[t]).indexOf("="),o=l.trim(unescape(i.slice(0,a))),e=unescape(i.slice(a+1)),0===o.indexOf("bp-")&&(n[o]=e);return encodeURIComponent(l.param(n))}if(l(document).on("click",".youzify-trigger-who-modal",function(t){t.preventDefault();var i=l(this);if(!i.hasClass("loading")){i.addClass("loading");var a=!1;if(!i.find("i").get(0)){var o=i.text();a=!0;i.html('<i class="fas fa-spin fa-spinner"></i>')}var e=l(this).closest("li.activity-item"),s={action:l(this).data("action"),post_id:e.attr("id").substr(9,e.attr("id").length)};jQuery.post(Youzify.ajax_url,s,function(t){a&&i.html(o),l.youzify_show_modal(l(t)),i.removeClass("loading")})}}),l(document).on("click",".youzify-delete-post",function(t){var i=l(this),a=i.parents("div.activity ul li"),o=a.prop("class").match(/date-recorded-([0-9]+)/);i.addClass("loading"),l.post(ajaxurl,{action:"delete_activity",cookie:s(),id:l(this).parent().attr("data-activity-id"),_wpnonce:i.attr("data-nonce")},function(t){t[0]+t[1]==="-1"?(a.prepend(t.substr(2,t.length)),a.children("#message").hide().fadeIn(300)):(a.slideUp(300),o&&activity_last_recorded===o[1]&&(newest_activities="",activity_last_recorded=0))})}),l(document).on("click",".youzify-show-tagged-users",function(t){t.preventDefault(),l(".youzify-wall-modal-overlay").fadeIn(500,function(){l(this).find(".youzify-modal-loader").fadeIn(400)});var i=l(this).closest("li.activity-item"),a={action:"youzify_activity_tagged_users_modal",post_id:i.attr("id").substr(9,i.attr("id").length)};jQuery.post(Youzify.ajax_url,a,function(t){l("body").append(t).find(".youzify-wall-modal").addClass("youzify-wall-modal-show"),l(".youzify-wall-modal-overlay").find(".youzify-modal-loader").hide()})}),l(document).keyup(function(t){l(".youzify-wall-modal-show")[0]&&27===t.keyCode&&l(".youzify-wall-modal-close").trigger("click")}),l(document).mouseup(function(t){l(".youzify-wall-modal-overlay").is(t.target)&&l(".youzify-wall-modal-show")[0]&&l(".youzify-wall-modal-close").trigger("click")}),"on"==Youzify.activity_autoloader){var a=l(window);a.scroll(function(){var t=l("#activity-stream .load-more:visible");if(t.get(0)&&!t.data("youzify-autoloaded")){var i=t.offset().top-3e3;a.scrollTop()+a.height()>i&&(t.data("youzify-autoloaded",1),t.find("a").trigger("click"))}})}l("#activity-stream").on("click",".friendship-button a",function(){l(this).parent().addClass("loading");var t=l(this).attr("id"),i=l(this).attr("href"),o=l(this);return t=(t=t.split("-"))[1],i=(i=(i=i.split("?_wpnonce="))[1].split("&"))[0],l.post(ajaxurl,{action:"addremove_friend",cookie:s(),fid:t,_wpnonce:i},function(t){var i=o.attr("rel"),a=o.parent();"add"===i?l(a).fadeOut(200,function(){a.removeClass("add_friend"),a.removeClass("loading"),a.addClass("pending_friend"),a.fadeIn(200).html(t)}):"remove"===i&&l(a).fadeOut(200,function(){a.removeClass("remove_friend"),a.removeClass("loading"),a.addClass("add"),a.fadeIn(200).html(t)})}),!1}),l("#activity-stream").on("click",".group-button a",function(t){l(this).hasClass("membership-requested")||l(this).addClass("youzify-btn-loading");var i=l(this).parent().attr("id"),a=l(this).attr("href"),e=l(this);return i=(i=i.split("-"))[1],a=(a=(a=a.split("?_wpnonce="))[1].split("&"))[0],e.hasClass("leave-group")&&!1===confirm(BP_DTheme.leave_group_confirm)||l.post(ajaxurl,{action:"joinleave_group",cookie:s(),gid:i,_wpnonce:a},function(a){var o=e.parent();l(o).fadeOut(200,function(){o.fadeIn(200).html(a);var t=l("#groups-personal span"),i=1;e.hasClass("leave-group")?(o.hasClass("hidden")&&o.closest("li").slideUp(200),i=0):e.hasClass("request-membership")&&(i=!1),t.length&&!1!==i&&(i?t.text(1+(t.text()>>0)):t.text((t.text()>>0)-1))})}),!1}),l("audio,video").on("play",function(){l("audio,video").not(this).each(function(t,i){i.pause()}),l("iframe").each(function(t,i){l(i).attr("src",l(i).attr("src"))})}),l(document).on("click",".nice-select .option",function(t){l(this).parent().prev(".current").attr("data-value",l(this).attr("data-value"))}),l(".activity-list").on("click","li.load-more",function(t){if(l(this).closest(".youzify-activity-shortcode")[0]){t.stopImmediatePropagation();var a=l(this);a.addClass("loading");var i=l(this).parents(".youzify-activity-shortcode");i.attr("data-page",parseInt(i.attr("data-page"))+1);var o=i.data();return o.page=i.attr("data-page"),l.post(ajaxurl,{data:o,action:"youzify_activity_load_activities"},function(t){if(t.success){a.hide();var i=l(t.data);a.parents("ul.activity-list").append(i),bp_legacy_theme_hide_comments(i)}},"json"),!1}}),l(document).on("click",".activity-item .youzify-show-item-tools",function(t){var i=l(this),a=i.closest("li.activity-item"),o=i.find("i").attr("class");i.hasClass("loaded")?a.find(".youzify-activity-tools").fadeToggle():i.hasClass("loading")||(i.addClass("loading"),i.find("i").attr("class","fas fa-spin fa-spinner"),l.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{activity_id:a.attr("id").substr(9,a.attr("id").length),action:"youzify_get_activity_tools"},success:function(t){i.find("i").attr("class",o),i.addClass("loaded"),i.removeClass("loading"),t.success&&l(t.data).prependTo(a).fadeIn(),l(t.data).find(".youzify-pin-tool").get(0)&&l("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-sticky-posts.min.js"}).appendTo("head"),l(t.data).find(".youzify-bookmark-tool").get(0)&&l("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-bookmark-posts.min.js"}).appendTo("head")}}))}),l(".youzify-activity-show-search-form").on("click",function(t){t.preventDefault();var i=l(this);i.closest("ul").find("#activity-filter-select .youzify-dropdown-area").fadeOut(1,function(){i.closest("li").find(".youzify-dropdown-area").fadeToggle(),i.closest("li").find("input").focus()})}),l(".youzify-activity-show-filter").on("click",function(t){t.preventDefault();var i=l(this);i.closest("ul").find(".youzify-activity-show-search .youzify-dropdown-area").fadeOut(1,function(){i.closest("li").find(".youzify-dropdown-area").fadeToggle()})}),l(".youzify-show-activity-search").on("click",function(t){t.preventDefault();var i=l(this).parents("#youzify"),a=i.find(".youzify-activity-show-search .youzify-dropdown-area");i.find("#activity-filter-select .youzify-dropdown-area, .activity-type-tabs").fadeOut(),a.fadeToggle(),a.find("input").focus()}),l(".youzify-show-activity-filter").on("click",function(t){t.preventDefault();var i=l(this).parents("#youzify");i.find(".youzify-activity-show-search .youzify-dropdown-area, .activity-type-tabs").fadeOut(),i.find("#activity-filter-select .youzify-dropdown-area").fadeToggle()}),l(".youzify-show-activity-menu").on("click",function(t){t.preventDefault();var i=l(this).parents("#youzify");i.find("#subnav .youzify-dropdown-area").fadeOut(),i.find(".activity-type-tabs").fadeToggle()}),l(".activity_share").on("click",".activity-read-more a",function(t){var i=l(this);return i.addClass("loading"),l.post(ajaxurl,{action:"get_single_activity_content",activity_id:i.parent().attr("id").split("-")[3]},function(t){i.closest(".activity-inner").slideUp(300).html(t).slideDown(300)}),!1}),l(document).on("click",".youzify-wall-modal-close",function(t){t.preventDefault(),l(".youzify-wall-modal").removeClass("youzify-wall-modal-show"),l(".youzify-wall-modal-overlay").fadeOut(600),setTimeout(function(){l(".youzify-wall-modal").remove()},500)}),l(document).on("click",".youzify-see-poll-results",function(){var i=l(this).closest(".youzify-poll-content");l(this).find("i").attr("class","fas fa-spinner fa-spin"),l.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_result_content",activity_id:i.attr("data-activity-id")},success:function(t){i.find(".youzify-poll-holder").html(l(t.data))}})}),l(document).on("click",".youzify-see-poll-options",function(){var i=l(this).closest(".youzify-poll-content");l(this).find("i").attr("class","fas fa-spinner fa-spin"),l.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_revote_content",activity_id:i.attr("data-activity-id")},success:function(t){i.find(".youzify-poll-holder").html(l(t.data).find(".youzify-poll-options-holder"))}})}),l(document).on("click",".youzify-submit-vote",function(){var i=l(this),a=l(this).closest(".youzify-poll-content");if(!i.hasClass("yz-loading"))if(l(this).hasClass("youzify-disable-vote"))l.youzify_DialogMsg("error",Youzify.poll_option_empty);else{var o=[];a.find('input[name="youzify_poll_option[]"]:checked').each(function(t){o[t]=l(this).val()});var e=l(this).html();l.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_poll_new_vote",voting_options:o,activity_id:a.attr("data-activity-id")},beforeSend:function(){i.addClass("yz-loading"),i.html('<i class="fas fa-spin fa-spinner"></i>')},success:function(t){i.removeClass("yz-loading"),i.html(e),t.success?("off"==i.attr("data-revote")&&(a.find(".youzify-poll-item-input").prop("disabled",!0),i.remove()),t.data.result?l.youzify_DialogMsg("success",t.data.msg):a.find(".youzify-poll-holder").html(l(t.data))):l.youzify_DialogMsg("error",t.data)}})}}),l(document).on("click",".youzify-poll-item-input",function(){var t=l(this).closest(".youzify-poll-options-holder");0<t.find(".youzify-poll-item-input:checked").length?t.find(".youzify-disable-vote").removeClass("youzify-disable-vote"):0==t.find(".youzify-poll-item-input:checked").length&&t.find(".youzify-submit-vote").addClass("youzify-disable-vote")}),l(document).on("click",".youzify-show-voters",function(){var i=l(this).closest(".youzify-poll-content"),a=l(this),o=a.html();a.html('<i class="fas fa-spinner fa-spin"></i>'),l.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_all_voters",activity_id:i.attr("data-activity-id"),option_id:l(this).attr("data-option-id")},success:function(t){a.html(o),i.find(".youzify-poll-holder").append(l(t.data))}})})})}(jQuery);